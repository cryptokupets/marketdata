<mvc:View controllerName="ck.marketdata.controller.Candles" 
  xmlns:mvc="sap.ui.core.mvc" 
  xmlns:core="sap.ui.core" 
  xmlns="sap.m" 
  xmlns:fc="ui5lab.fc" 
  xmlns:fci="ui5lab.fc.indicator" 
  displayBlock="true">
  <Page enableScrolling="false" 
    showHeader="false">
    <subHeader>
      <Toolbar>
        <Button icon="sap-icon://nav-back" 
          press="onBackPress"/>
        <Label text="Currency:"/>
        <ComboBox maxWidth="8rem" 
          selectedKey="{view>/currency}" 
          items="{Currencies}" 
          change="onCurrencyChange">
          <items>
            <core:Item text="{key}" 
              key="{key}"/>
          </items>
        </ComboBox>
        <Label text="Asset:"/>
        <ComboBox id="asset" 
          maxWidth="8rem" 
          selectedKey="{view>/asset}" 
          change="onAssetChange"/>
        <Label text="Timeframe:"/>
        <ComboBox maxWidth="6rem" 
          selectedKey="{view>/timeframe}" 
          items="{Timeframes}" 
          change="onTimeframeChange">
          <items>
            <core:Item text="{key}" 
              key="{key}"/>
          </items>
        </ComboBox>
        <Label text="Date Range:"/>
        <DateRangeSelection width="18rem" 
          dateValue="{view>/start}" 
          secondDateValue="{view>/end}" 
          change="onDateRangeChange" />
      </Toolbar>
    </subHeader>
    <content>
      <VBox height="100%" 
        busy="{view>/busy}">
        <fc:CandlestickChart items="{buffer>/candles}" 
          padding="5 20 25 60">
          <fc:layoutData>
            <FlexItemData minHeight="500px" />
          </fc:layoutData>
          <fc:items>
            <fc:Candle time="{buffer>time}" 
              open="{buffer>open}" 
              high="{buffer>high}" 
              low="{buffer>low}" 
              close="{buffer>close}"/>
          </fc:items>
        </fc:CandlestickChart>
        <fci:CCIT items="{buffer>/indicatorOutputs/0/output}" 
          overboughtZone="100" 
          oversoldZone="-100" 
          padding="5 20 25 60">
          <fci:layoutData>
            <FlexItemData minHeight="200px" />
          </fci:layoutData>
          <fci:items>
            <fci:CCITItem time="{buffer>time}" 
              y="{buffer>values/0}"/>
          </fci:items>
        </fci:CCIT>
      </VBox>
    </content>
  </Page>
</mvc:View>
