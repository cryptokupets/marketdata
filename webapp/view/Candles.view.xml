<mvc:View controllerName="ck.marketdata.controller.Candles" 
  xmlns:mvc="sap.ui.core.mvc" 
  xmlns:core="sap.ui.core" 
  xmlns:l="sap.ui.layout" 
  xmlns:form="sap.ui.layout.form" 
  xmlns="sap.m" 
  xmlns:fc="ui5lab.fc" 
  xmlns:fci="ui5lab.fc.indicator" 
  displayBlock="true">
  <Page enableScrolling="false" 
    showNavButton="true" 
    navButtonPress="onBackPress" 
    showHeader="true">
    <content>
      <l:ResponsiveSplitter>
        <l:PaneContainer>
          <l:SplitPane>
            <form:Form editable="true">
              <form:layout>
                <form:ResponsiveGridLayout labelSpanXL="12" 
                  labelSpanL="12" 
                  labelSpanM="12" 
                  labelSpanS="12" 
                  adjustLabelSpan="false" 
                  emptySpanXL="0" 
                  emptySpanL="0" 
                  emptySpanM="0" 
                  emptySpanS="0" 
                  columnsXL="1" 
                  columnsL="1" 
                  columnsM="1"/>
              </form:layout>
              <form:formContainers>
                <form:FormContainer>
                  <form:formElements>
                    <form:FormElement label="Currency">
                      <ComboBox selectedKey="{view>/currency}" 
                        maxWidth="8rem" 
                        items="{Currencies}" 
                        change="onCurrencyChange">
                        <items>
                          <core:Item text="{key}" 
                            key="{key}"/>
                        </items>
                      </ComboBox>
                    </form:FormElement>
                    <form:FormElement label="Asset">
                      <ComboBox id="asset" 
                        maxWidth="8rem" 
                        selectedKey="{view>/asset}" 
                        change="onAssetChange"/>
                    </form:FormElement>
                    <form:FormElement label="Timeframe">
                      <ComboBox selectedKey="{view>/timeframe}" 
                        maxWidth="8rem" 
                        items="{Timeframes}" 
                        change="onTimeframeChange">
                        <items>
                          <core:Item text="{key}" 
                            key="{key}"/>
                        </items>
                      </ComboBox>
                    </form:FormElement>
                    <form:FormElement label="Range">
                      <DateRangeSelection dateValue="{view>/start}" 
                        secondDateValue="{view>/end}" 
                        change="onDateRangeChange" />
                    </form:FormElement>
                  </form:formElements>
                </form:FormContainer>
              </form:formContainers>
            </form:Form>
          </l:SplitPane>
          <l:SplitPane>
            <VBox height="100%" 
              busy="{view>/busy}">
              <fc:CandlestickChart items="{buffer>/candles}" 
                padding="5 20 25 60">
                <fc:layoutData>
                  <FlexItemData minHeight="500px" />
                </fc:layoutData>
                <fc:items>
                  <fc:Candle time="{buffer>time}" 
                    open="{buffer>open}" 
                    high="{buffer>high}" 
                    low="{buffer>low}" 
                    close="{buffer>close}"/>
                </fc:items>
              </fc:CandlestickChart>
              <fci:CCIT items="{buffer>/indicatorOutputs/0/output}" 
                overboughtZone="100" 
                oversoldZone="-100" 
                padding="5 20 25 60">
                <fci:layoutData>
                  <FlexItemData minHeight="200px" />
                </fci:layoutData>
                <fci:items>
                  <fci:CCITItem time="{buffer>time}" 
                    y="{buffer>values/0}"/>
                </fci:items>
              </fci:CCIT>
            </VBox>
          </l:SplitPane>
        </l:PaneContainer>
      </l:ResponsiveSplitter>
    </content>
  </Page>
</mvc:View>
